<cdn-header
  [boardId]="boardId"
  [playerForm]="playerForm"
  (openDialog)="openDialog()"
></cdn-header>

<div class="toolbar">
<!--  [disabled]="(state?.players | team:'Red' | keyvalue).length < 2 || (state?.players | team:'Blue' | keyvalue).length < 2"-->
  <button matRipple class="button"
          *ngIf="!state?.game || state?.game?.winner" (click)="gameStart()"
          >
    Start game
  </button>

  <button matRipple class="button"
          *ngIf="state?.game && !state?.game?.winner"
          (click)="gameStop()">
    Stop game
  </button>

  <button matRipple class="button" (click)="scoreClear()">
    Clear score
  </button>
</div>

<div class="area">
  <div class="board">

    <div class="info">
      <span class="info__span" *ngIf="state?.game?.current?.team as team">
      <span>Current team</span>
      <div class="circle" [ngClass]="{'red': team ===  'Red', 'blue': team ===  'Blue'}">
        {{ state?.game?.current?.wordsNo || '?' }}
      </div>
    </span>
    </div>

    <div class="live">
      <cdn-layer-live
        [state]="state"
        [playerForm]="playerForm"
        [clientId]="clientId"
        (nextMove)="moveNext($event.i, $event.j)"
      ></cdn-layer-live>
    </div>

  </div>

  <div class="panel">
    <cdn-teams
      [state]="state"
    ></cdn-teams>

    <cdn-layer-game
      *ngIf="state?.game && (state?.game?.leaders?.blue?.id == clientId || state?.game?.leaders?.red?.id === clientId)"
      [state]="state"
      [playerForm]="playerForm"
      (movesAccept)="movesAccept($event)"
    ></cdn-layer-game>
  </div>
</div>
